{% extends "shop/base.html" %}
{% load widget_tweaks %}
{% load static %}



{% block content %}
{% include 'cart/detail_header.html' %}

<div id="wrapper">
  <!-- content -->	
  <div class="content">
      <!-- column-image  -->	
      <div class="column-image">
          <div class="bg"  data-bg="images/bg/1.jpg"></div>
          <div class="overlay"></div>
          <div class="column-title">
              <h2>My Stories</h2>
              <h3>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas in pulvinar neque. Nulla finibus lobortis pulvinar.</h3>
          </div>
        
          <div class="fixed-column-dec"></div>
      </div>
      <!-- column-image end  -->	
      <!-- column-wrapper -->	
      <div class="column-wrapper  single-content-section">
          <!-- fixed-bottom-content-->	
          <div class="fixed-bottom-content">
              <!-- pagination   -->
              <div class="pagination-container fl-wrap">
                  <a href="#" class="prevposts-link"><i class="fal fa-chevron-left"></i></a>
                  <a href="#">1</a>
                  <a href="#" class="current-page">2</a>
                  <a href="#">3</a>
                  <a href="#">4</a>
                  <a href="#" class="nextposts-link"><i class="fal fa-chevron-right"></i></a>
              </div>
              <!-- pagination  end -->
          </div>
          <!-- fixed-bottom-content end -->	
          <!--section  -->	
          {% for item in cart %}
          {% with product=item.product %}
          <section id="sec3">
            <div class="container small-container">
                <div class="section-title fl-wrap">
                    <h3>Services and prices</h3>
                    <h4>Sed tempor iaculis massa faucibus feugiat. In fermentum facilisis massa</h4>
                    <div class="section-number">03.</div>
                </div>
                <div class="column-wrapper_item fl-wrap">
                    <div class="column-wrapper_text fl-wrap">
                        <!-- serv-wrap--> 
                        <div class="serv-wrap fl-wrap">
                            <!-- serv-item --> 
                           
                            <div class="serv-item">

                                <div class="serv-media">
                                  <a href="{{ product.get_absolute_url }}">
                                    <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static "img/no_image.png" %}{% endif %}" width="300px">
                                  </a>
                                </div>
                                <div class="serv-text">
                                  
                                    <h4><a href="#">{{ product.name }}</a></h4>
                                    <p>{{product.description}}</p>
                                    <ul>
                                        <li>{{product.item1}}</li>
                                        <li> {{product.item2 }}</li>
                                        <li>{{product.item3 }}</li>
                                        <td><a href="{% url "cart:cart_remove" product.id %}">Remove</a></td>
                                    </ul>

                                    <form action="{% url "cart:cart_add" product.id %}" method="post">
                                      {{ item.update_quantity_form.quantity }}
                                      {{ item.update_quantity_form.update }}
                                      {% csrf_token %}
                                      {% for hidden_field in form.hidden_fields %}
                                        {{ hidden_field }}
                                      {% endfor %}
                                      
                                      {% if form.non_field_errors %}
                                        <div class="alert alert-danger" role="alert">
                                        {% for error in form.non_field_errors %}
                                          {{ error }}
                                        {% endfor %}
                                        </div>
                                      {% endif %}
                                      
                                      {% for field in form.visible_fields %}
                                        <div class="form-group">
                                        {{ field.label_tag }}
                                      
                                        {% if form.is_bound %}
                                          {% if field.errors %}
                                          {% render_field field class="form-control is-invalid" %}
                                          {% for error in field.errors %}
                                            <div class="invalid-feedback">
                                            {{ error }}
                                            </div>
                                          {% endfor %}
                                          {% else %}
                                          {% render_field field class="form-control is-valid" %}
                                          {% endif %}
                                        {% else %}
                                          {% render_field field class="form-control" %}
                                        {% endif %}
                                      
                                        {% if field.help_text %}
                                          <small class="form-text text-muted">{{ field.help_text }}</small>
                                          
                                        {% endif %}
                                        </div>
                                      {% endfor %} 
                                      <label>
                                        <input type="submit" value="Update">
                                    </label>   
                                      <button type="submit" class="btn btn-primary btn-block">Sign In</button>
                                      </form>
                                    
                                    <form action="{% url "cart:cart_add" product.id %}" method="post">
                                      {{ item.update_quantity_form.quantity }}
                                      {{ item.update_quantity_form.update }}
                                      <input type="submit" value="Update">
                                      {% csrf_token %}
                                    </form>
                                    <div class="serv-price">Price per person :<span> $ {{ item.price }}</span></div>
                                    <div class="serv-price">Final Price :<span> $ {{ item.total_price }}</span></div>
                                   
                                </div>
                            </div>
                           
                            <!-- serv-item end --> 
                            <!-- serv-item --> 
                            
                            <!-- serv-item end -->                                                  
                        </div>
                        <!-- serv-wrap end --> 
                        <p>{{product.description}}</p>
                    </div>
                </div>
            </div>
        </section>
        {% endwith %}
        {% endfor %}
          <!--section end  -->	
          <!--footer -->			
          <footer class="min-footer fl-wrap content-animvisible">
              <div class="container small-container">
                  <div class="footer-inner fl-wrap">
                      <!-- policy-box-->
                      <div class="policy-box">
                          <span>&#169; Kotlis 2019  /  All rights reserved. </span>
                      </div>
                      <!-- policy-box end-->
                      <a href="#" class="to-top-btn to-top">Back to top <i class="fal fa-long-arrow-up"></i></a>
                  </div>
              </div>
          </footer>
          <!--footer end  -->	
      </div>
      <!-- column-wrapper -->	
  </div>
  <!--content end-->	
  <!--share-wrapper-->
  <div class="share-wrapper">
      <div class="share-container fl-wrap  isShare"></div>
  </div>
  <!--share-wrapper end-->
</div>

{% endblock %}